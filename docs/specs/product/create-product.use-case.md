# UC_PRODUCT_CREATE_PRODUCT

A. Actors

- User

B. Description

Referential element, will be used by order, invoice and delivery-note.

C. Basic Flow

1. Use case begins when Actor navigate to `/products/create`.
2. Actor has to complete a form
3. Form data is pre-checked by validation form schema and must conform to gql schema.

- a. If pre-check failed, specifics errors should be displayed.
- b. If gql validation failed, graphql error should be displayed
- c. If pre-check and gql validation are successful, data can be send.

4. Actor has to be authenticated (cognito) by server too.
5. The business code can be provided by 2 cases

- Case 1 : Code is provided by Actor
- Case 2 : Code is not provided by Actor

  1.  > [BR_PRODUCT_CREATE_PRODUCT_CODE](#brproductcreateproductcode)
  2.  > [BR_PRODUCT_SETTINGS_INCREMENT_COUNTER_PARAM](#brproductsettingsincrementcounterparam)

  3.  When mongodb error code equals 11000, process has to retry 10 times before sending error.

6. Use case ends when Actor is redirected to products page.

---

# Business Rules

### BR_PRODUCT_CREATE_PRODUCT_CODE

Code is generated by system

- COUNTER key must exist and be unique
- SUFFIX key must exist and be unique

- > [UC_SETTING_GENERATE_CODE](../setting/generate-code.use-case.md#ucsettinggeneratecode)

### BR_PRODUCT_SETTINGS_INCREMENT_COUNTER_PARAM

-> [BR_SETTING_COUNTER_PARAM_INCREMENT_BY_ONE](../setting/counter.use-cases.md#brsettingcounterparamincrementbyone)
[BR_SETTING_COUNTER_PARAM_INCREMENT_WITH_LEADING_ZERO](../setting/counter.use-cases.md#brsettingcounterparamincrementwithleadingzero)
